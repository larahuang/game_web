import{u as w,a as r,j as e,L as v,Q as F}from"./index.05f29c45.js";import{N as B}from"./Navbar.a7831f7d.js";import{c as C,g as k}from"./navbar.f2556c7d.js";import{u as _}from"./index.esm.12f282d4.js";import{P}from"./ProductCard.7bcfaa2f.js";const T=()=>{var l,c,d,u,m;const{cartItems:o,cartTotalItems:p,cartTotalPrice:i,removeAll:h}=C(t=>t),{register:a,handleSubmit:f,formState:{errors:s}}=_();w();const y=()=>F.success("\u8A02\u55AE\u6210\u529F",{position:"bottom-right",autoClose:500,hideProgressBar:!0,closeOnClick:!0}),x=async t=>{const N="https://api-game-project.vercel.app/api/order";try{let n={orderNum:Date.now(),email:t.email,phone:t.phone,city:t.city,town:t.town,add_detail:t.add_detail,products:o,totalPrice:i};await k.post(N,n).then(g=>{g.status===200&&(console.log(g.data,"Success"),h(),y())})}catch(n){console.log(n,"GET Error!!")}},b=o.length===0;return r("div",{className:"Cart-container",children:[b?e("h1",{children:"No Items"}):o.map(t=>e(P,{product:t,cart:!0},t._id)),e("div",{className:"cart--details",children:r("div",{className:"spans",children:[r("span",{className:"Total_Total",children:["Total Total: ",e("strong",{children:p})]}),r("span",{className:"Total_Price",children:["Total Price: ",r("strong",{children:[e("span",{className:"price\uFF3Fsymbol",children:"$"}),i==null?void 0:i.toFixed(2)," ",e("span",{className:"unit",children:"\u5143"})]})]})]})}),r("form",{className:"order_form",onSubmit:f(x),children:[e("input",{type:"text",className:"block w-full rounded-md border-0 px-3.5 py-2 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6",placeholder:"email",...a("email",{required:{value:!0,message:"\u6B04\u4F4D\u5FC5\u586B"}})}),s.email&&r("span",{children:[" ",(l=s.email)==null?void 0:l.message]}),e("input",{type:"text",className:"block w-full rounded-md border-0 px-3.5 py-2 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6",placeholder:"Phone",...a("phone",{required:{value:!0,message:"\u6B04\u4F4D\u5FC5\u586B"}})}),s.phone&&r("span",{children:[" ",(c=s.phone)==null?void 0:c.message]}),r("div",{className:"city",children:[e("input",{type:"text",className:"block w-full rounded-md border-0 px-3.5 py-2 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6",placeholder:"City",...a("city",{required:{value:!0,message:"\u6B04\u4F4D\u5FC5\u586B"}})}),s.city&&r("span",{children:[" ",(d=s.city)==null?void 0:d.message]}),e("input",{type:"text",className:"block w-full rounded-md border-0 px-3.5 py-2 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6",placeholder:"town",...a("town",{required:{value:!0,message:"\u6B04\u4F4D\u5FC5\u586B"}})}),s.town&&r("span",{children:[" ",(u=s.town)==null?void 0:u.message]})]}),e("input",{type:"text",className:"block w-full rounded-md border-0 px-3.5 py-2 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6",placeholder:"add_detail",...a("add_detail",{required:{value:!0,message:"\u6B04\u4F4D\u5FC5\u586B"}})}),s.add_detail&&r("span",{children:[" ",(m=s.add_detail)==null?void 0:m.message]}),e("input",{type:"submit",value:"\u9001\u51FA",className:"block w-full rounded-md bg-indigo-600 px-3.5 py-2.5 text-center text-sm font-semibold text-white shadow-sm hover:bg-indigo-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600"})]}),e(v,{to:"/",children:e("button",{className:"Back",children:"Back"})})]})},I=()=>r("div",{className:"full",children:[e(B,{}),e("h1",{children:e("b",{children:"Cart"})}),e(T,{})]});export{I as default};
